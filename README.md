# iOS 虛擬定位工具

透過 `pymobiledevice3` 在 Mac 上模擬 iPhone 的 GPS 定位。

## 系統需求

- macOS（Apple Silicon 或 Intel）
- iPhone 透過 USB 連接至 Mac
- iOS 17+ 需開啟**開發者模式**（設定 > 隱私權與安全性 > 開發者模式）

## 安裝步驟

### 1. 開啟終端機

按 `Cmd + Space` 搜尋「終端機」或「Terminal」並開啟。

### 2. 切換到資料夾目錄

```bash
cd /path/to/LocationScript
```

將 `/path/to/LocationScript` 替換為資料夾實際所在的路徑。也可以輸入 `cd ` 後直接把資料夾拖進終端機視窗。

### 3. 允許執行安裝腳本

```bash
chmod +x install.sh
```

### 4. 執行安裝

```bash
./install.sh
```

安裝腳本會自動檢查並安裝以下依賴：

- [Homebrew](https://brew.sh)
- Python 3
- Tkinter
- pipx
- pymobiledevice3

安裝完成後會在資料夾內產生 **iOS虛擬定位.app**。
如無法啟用app，請在終端機輸入 `python3 app.py` （資料夾路徑需正確）。

## 使用方式

### 1. 連接 iPhone

用 USB 線將 iPhone 連接到 Mac，並在 iPhone 上點選「信任此電腦」。

### 2. 開啟程式

雙擊 **iOS虛擬定位.app** 啟動。

### 3. 啟動 Tunnel（iOS 17+ 必須）

點擊「啟動」按鈕，會開啟 Terminal 並要求輸入 Mac 的登入密碼（sudo 權限）。

### 4. 設定虛擬定位

有四種方式輸入座標：

- **手動輸入**：直接在緯度、經度欄位輸入座標
- **Google Maps 網址**：貼上瀏覽器的 Google Maps 網址後點「解析」自動擷取座標（注意：搜尋列有值可能影響結果）
- **座標字串**：貼上 `緯度,經度` 格式的字串後點「解析」
- **收藏地點**：從已收藏的地點中選擇
- **座標清單**：載入 JSON 檔案，點選清單中的項目即立即前往該座標

輸入完成後點擊「設定位置」即可。定位成功後會在下方自動顯示該座標對應的地址名稱（需要網路）。若座標落在海洋或荒地，也會顯示警告。

### 5. 清除虛擬定位

點擊「清除」按鈕。清除後需**重新開啟地圖 App** 才會恢復真實定位。
如果沒辦法恢復，請使用飛航模式，開啟後關閉。

## 注意事項

- 首次執行 `.app` 時，macOS 可能會提示「無法打開」，請到「系統設定 > 隱私權與安全性」允許執行
- 關閉程式時會詢問是否同時停止 Tunnel
- 收藏的地點會儲存在資料夾內的 `favorites.json`
- 座標清單支援兩種 JSON 格式：
  - 物件格式（與 `favorites.json` 相同）：`{"地點名稱": {"lat": "...", "lng": "..."}}`
  - 陣列格式：`[{"name": "地點名稱", "lat": "...", "lng": "..."}]`，無 `name` 時自動以座標顯示
- 拜訪過的定位紀錄會儲存在資料夾內的 `history/` 目錄（依日期分檔）
